<script type="text/x-red" data-help-name="prologix-gpib-tcp">
  <p>A simple TCP request node - sends the <code>msg.payload</code> to a server tcp port and expects a response.</p>
  <p>Connects, sends the "request", and reads the "response". It can either count a number of
  returned characters into a fixed buffer, match a specified character before returning,
  wait a fixed timeout from first reply and then return, sit and wait for data, or send then close the connection
  immediately, without waiting for a reply.</p>
  <p>The response will be output in <code>msg.payload</code> as a buffer, so you may want to .toString() it.</p>
  <p>If you leave tcp host or port blank they must be set by using the <code>msg.host</code> and <code>msg.port</code> properties.</p>
</script>

<script type="text/x-red" data-template-name="prologix-gpib-tcp">
  <div class="form-row">
    <label for="node-input-name">
      <i class="fa fa-tag" />
      <span data-i18n="node-red:common.label.name" />
    </label>
    <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name" />
  </div>
  <div class="form-row">
    <label for="node-input-host">
      <i class="fa fa-globe" />
      <span data-i18n="indySoft.prologix.label.host" />
    </label>
    <input id="node-input-host" type="text" placeholder="[placeholder]indySoft.prologix.placeholder.host" style="width:45%" />
  </div>
  <div class="form-row">
    <label for="node-input-port">
      <i class="fa fa-network-wired" />
      <span data-i18n="indySoft.prologix.label.port" />
    </label>
    <input type="text" id="node-input-port" style="width:60px" />
  </div>
</script>

<script type="text/javascript">
RED.nodes.registerType('prologix-gpib-tcp', {
    category: 'network',
    color: 'Silver',
    defaults: {
        name: { value: '' },
        host: { value: '', required: true },
        port: { value: '1234', required: true, validate: RED.validators.regex(/^(\d*|)$/) },
        emulated: { value: false }
    },
    inputs: 1,
    outputs: 4,
    outputLabels: [
        'Connected',
        'Disconnected',
        'Errors',
        'Data'
    ],
    icon: 'bridge-dash.svg',
    label: function () { return this.name || 'Prologix TCP: ' + (this.host ? this.host + ':' : '') + this.port; },
    labelStyle: function () { return this.name ? 'node_label_italic' : ""; },
    paletteLabel: 'Pologix GPIB TCP'
});
</script>
