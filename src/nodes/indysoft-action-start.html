<script type="text/html" data-template-name="indysoft-action-start">
  <div class="form-row">
    <label for="node-input-sectionConfigId"><i class="fa fa-tag"></i> Section</label>
    <input type="text" id="node-input-sectionConfigId" style="display: inline-block; width: auto; vertical-align: top;">
  </div>
  <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Action Name</span></label>
      <input type="text" id="node-input-name">
  </div>
</script>

<script type="text/html" data-help-name="indysoft-action-start">
  <p>Used to invoke a flow from the front-end</p>
</script>

<script>
const IndySoftActionStartNodeConfig = {
  color: '#25c43a',
  category: 'Procedure',
  defaults: {
    name: { value: 'MyAction', required: true },
    sectionConfigId: { type: 'indysoft-section-configuration', required: true }
  },
  inputs: 0,
  outputs: 1,
  icon: 'inject.svg',
  label: function() {
    let sectionConfig = this;
    RED.nodes.eachConfig(node => {
      if (node.id === this.sectionConfigId) sectionConfig = node;
    });
    if (sectionConfig) return `Section Begin: ${sectionConfig.name}; Action: ${this.name}`;
    return `Section Begin: <none>; Action: ${this.name}`;
  },
  labelStyle: function () {
    return 'node_label_italic';
  },
  paletteLabel: 'Section Begin'
}

RED.nodes.registerType('indysoft-action-start', IndySoftActionStartNodeConfig);

</script>
